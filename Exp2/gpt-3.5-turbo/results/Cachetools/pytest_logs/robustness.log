F.FFF....FF                                                              [100%]
================================== FAILURES ===================================
___________ test_cache_negative_maxsize_rejects_values_predictably ____________

    def test_cache_negative_maxsize_rejects_values_predictably():
        """
        Reference cachetools in your repo treats maxsize=-1 as "no item can fit".
        Robustness expectation:
          - constructing Cache(-1) should not crash
          - storing a normal value should fail predictably (ValueError) rather than corrupting state
        """
        cachetools = _import_cachetools()
    
>       c = cachetools.Cache(-1)

tests\Cachetools\robustness_test.py:72: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <cachetools.cache.Cache object at 0x0000021CD8967DF0>, maxsize = -1
missing = None

    def __init__(self, maxsize=None, missing=None):
        if maxsize is not None:
            if not isinstance(maxsize, int) or maxsize < 0:
>               raise ValueError("maxsize should be a non-negative integer or None")
E               ValueError: maxsize should be a non-negative integer or None

generation\Cachetools\cachetools\cache.py:9: ValueError
___________ test_cache_value_too_large_for_getsizeof_does_not_crash ___________

    def test_cache_value_too_large_for_getsizeof_does_not_crash():
        """
        Extreme getsizeof behavior should not crash the process.
        """
        cachetools = _import_cachetools()
    
>       c = cachetools.Cache(100, getsizeof=lambda _x: 200)
E       TypeError: __init__() got an unexpected keyword argument 'getsizeof'

tests\Cachetools\robustness_test.py:106: TypeError
___________ test_popitem_on_empty_cache_raises_keyerror[FIFOCache] ____________

cache_cls = 'FIFOCache'

    @pytest.mark.parametrize("cache_cls", ["FIFOCache", "LFUCache", "LRUCache"])
    def test_popitem_on_empty_cache_raises_keyerror(cache_cls: str):
        cachetools = _import_cachetools()
>       cls = getattr(cachetools, cache_cls)
E       AttributeError: module 'cachetools' has no attribute 'FIFOCache'

tests\Cachetools\robustness_test.py:116: AttributeError
____________ test_popitem_on_empty_cache_raises_keyerror[LFUCache] ____________

cache_cls = 'LFUCache'

    @pytest.mark.parametrize("cache_cls", ["FIFOCache", "LFUCache", "LRUCache"])
    def test_popitem_on_empty_cache_raises_keyerror(cache_cls: str):
        cachetools = _import_cachetools()
>       cls = getattr(cachetools, cache_cls)
E       AttributeError: module 'cachetools' has no attribute 'LFUCache'

tests\Cachetools\robustness_test.py:116: AttributeError
_____________________ test_cachedmethod_basic_usage_smoke _____________________

    def test_cachedmethod_basic_usage_smoke():
        """
        cachedmethod should work in a minimal class use case (present in many versions).
        """
        cachetools = _import_cachetools()
    
        if not hasattr(cachetools, "cachedmethod"):
            pytest.skip("cachetools.cachedmethod not available in this implementation")
    
        class TestClass:
            @cachetools.cachedmethod(lambda self: cachetools.LRUCache(maxsize=10))
            def cached_method(self, x):
                return x
    
        obj = TestClass()
>       assert obj.cached_method(1) == 1

tests\Cachetools\robustness_test.py:210: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <robustness_test.test_cachedmethod_basic_usage_smoke.<locals>.TestClass object at 0x0000021CD7358F70>
args = (1,), kwargs = {}
k = (<robustness_test.test_cachedmethod_basic_usage_smoke.<locals>.TestClass object at 0x0000021CD7358F70>, 1)

    @functools.wraps(method)
    def wrapper(self, *args, **kwargs):
        k = key(self, *args, **kwargs)
        try:
>           return cache[k]
E           TypeError: 'function' object is not subscriptable

generation\Cachetools\cachetools\decorators.py:28: TypeError
_________ test_non_hashable_keys_raise_typeerror_in_dict_like_methods _________

    def test_non_hashable_keys_raise_typeerror_in_dict_like_methods():
        """
        This is stable: list keys are unhashable and should raise TypeError.
        """
        cachetools = _import_cachetools()
        c = cachetools.Cache(100)
    
        with pytest.raises(TypeError):
            _ = c.get([1, 2, 3])  # type: ignore[arg-type]
    
        with pytest.raises(TypeError):
            c[[1, 2, 3]] = "value"  # type: ignore[index]
    
        with pytest.raises(TypeError):
            del c[[1, 2, 3]]  # type: ignore[index]
    
        with pytest.raises(TypeError):
>           _ = c.pop([1, 2, 3], None)  # type: ignore[arg-type]
E           Failed: DID NOT RAISE <class 'TypeError'>

tests\Cachetools\robustness_test.py:231: Failed
=========================== short test summary info ===========================
FAILED tests/Cachetools/robustness_test.py::test_cache_negative_maxsize_rejects_values_predictably
FAILED tests/Cachetools/robustness_test.py::test_cache_value_too_large_for_getsizeof_does_not_crash
FAILED tests/Cachetools/robustness_test.py::test_popitem_on_empty_cache_raises_keyerror[FIFOCache]
FAILED tests/Cachetools/robustness_test.py::test_popitem_on_empty_cache_raises_keyerror[LFUCache]
FAILED tests/Cachetools/robustness_test.py::test_cachedmethod_basic_usage_smoke
FAILED tests/Cachetools/robustness_test.py::test_non_hashable_keys_raise_typeerror_in_dict_like_methods
6 failed, 5 passed in 0.43s
