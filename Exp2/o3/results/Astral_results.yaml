project_name: Astral
task_file: D:\桌面\RealAppCodeBench_generic_eval\tasks\Astral\astral.yaml
generated_repo: D:\桌面\RealAppCodeBench_generic_eval\generation\Astral
timestamp: '2026-01-01 21:21:52'
functional_score: 1.0
non_functional_score: 0.7282
non_functional_subscores:
  maintainability: 0.9117
  security: 1.0
  robustness: 1.0
  performance: 0.0
  resource: 0.0
non_functional_weights:
  maintainability: 0.36
  security: 0.24
  robustness: 0.16
  performance: 0.12
  resource: 0.12
results:
  functional:
    returncode: 0
    stdout: '...........                                                              [100%]

      11 passed in 0.21s

      '
    elapsed_time_s: 1.679237
    avg_memory_mb: 31.94
    avg_cpu_percent: 99.0
    passed: 11
    failed: 0
    skipped: 0
    total: 11
    score_inputs_passed: 11
    score_inputs_failed: 0
    score_inputs_total: 11
    score_inputs_returncode: 0
    score_inputs_failed_suite: false
    score_inputs_baseline_keys:
    - functional_suite_time_s
    - functional_tests_total
  performance:
    returncode: 1
    stdout: "F                                                                   \
      \     [100%]\n================================== FAILURES ===================================\n\
      ________________________ test_astral_performance_smoke ________________________\n\
      \n    def test_astral_performance_smoke() -> None:\n        \"\"\"Smoke test\
      \ to ensure the performance benchmark runs successfully.\"\"\"\n>       metrics\
      \ = run_astral_performance_benchmark(iterations=5, days=10)\n\ntests\\Astral\\\
      performance_test.py:75: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\
      \ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntests\\Astral\\performance_test.py:60: in run_astral_performance_benchmark\n\
      \    _ = sun(loc.observer, date=d, tzinfo=loc.timezone)\ngeneration\\Astral\\\
      astral\\sun.py:229: in sun\n    results[k] = f(observer, date=date, tzinfo=tzinfo)\n\
      generation\\Astral\\astral\\sun.py:193: in dusk\n    dt = _calc_event(observer,\
      \ date, CIVIL_ZENITH, is_rise=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\
      \ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nobserver = Observer(latitude=51.5074,\
      \ longitude=-0.1278, elevation=0.0)\ndate = datetime.date(2020, 1, 9), zenith\
      \ = 96.0, is_rise = False\n\n    def _calc_event(observer: Observer, date, zenith:\
      \ float, is_rise: bool) -> Optional[datetime]:\n        \"\"\"\n        Calculate\
      \ the UTC datetime of a sunrise/sunset/twilight event.\n    \n        Returns\
      \ None if the event does not happen (e.g. polar night/day).\n        \"\"\"\n\
      \        # Day of year\n        n = day_of_year(date)\n    \n        lng_hour\
      \ = observer.longitude / 15.0\n    \n        if is_rise:\n            t = n\
      \ + ((6 - lng_hour) / 24)\n        else:\n            t = n + ((18 - lng_hour)\
      \ / 24)\n    \n        # Sun's mean anomaly\n        m = (0.9856 * t) - 3.289\n\
      \    \n        # Sun's true longitude\n        l = m + (1.916 * sin_deg(m))\
      \ + (0.020 * sin_deg(2 * m)) + 282.634\n        l = to_range(l, 0, 360)\n  \
      \  \n        # Sun's right ascension\n        ra = atan2_deg(0.91764 * tan_deg(l),\
      \ 1)\n        ra = to_range(ra, 0, 360)\n    \n        # convert RA to hours\n\
      \        ra /= 15.0\n    \n        # Sun's declination\n        sin_dec = 0.39782\
      \ * sin_deg(l)\n        cos_dec = cos_deg(asin_deg(sin_dec))\n    \n       \
      \ # Sun local hour angle\n        cos_h = (cos_deg(zenith) - (sin_dec * sin_deg(observer.latitude)))\
      \ / (\n            cos_dec * cos_deg(observer.latitude)\n        )\n    \n \
      \       # If cos_h out of range the sun never rises/sets on this date at this\
      \ location\n        if cos_h > 1 or cos_h < -1:\n            return None\n \
      \   \n        if is_rise:\n            h = 360 - acos_deg(cos_h)\n        else:\n\
      \            h = acos_deg(cos_h)\n    \n        h /= 15.0  # to hours\n    \n\
      \        # local mean time\n        t_local = h + ra - (0.06571 * t) - 6.622\n\
      \    \n        # Convert to UTC\n        ut = t_local - lng_hour\n        ut\
      \ = to_range(ut, 0, 24)  # wrap around\n    \n        # Build datetime in UTC\n\
      \        hour = int(ut)\n        minute = int((ut - hour) * 60)\n        second\
      \ = int((((ut - hour) * 60) - minute) * 60 + 0.5)\n    \n>       dt = datetime(\n\
      \            date.year,\n            date.month,\n            date.day,\n  \
      \          hour=hour,\n            minute=minute,\n            second=second,\n\
      \            tzinfo=timezone.utc,\n        )\nE       ValueError: second must\
      \ be in 0..59\n\ngeneration\\Astral\\astral\\sun.py:102: ValueError\n===========================\
      \ short test summary info ===========================\nFAILED tests/Astral/performance_test.py::test_astral_performance_smoke\
      \ - Valu...\n1 failed in 0.55s\n"
    elapsed_time_s: 2.186444
    avg_memory_mb: 32.06
    avg_cpu_percent: 100.8
    passed: 0
    failed: 1
    skipped: 0
    total: 1
    score_inputs_passed: 0
    score_inputs_failed: 1
    score_inputs_total: 1
    score_inputs_returncode: 1
    score_inputs_failed_suite: true
    score_inputs_baseline_keys:
    - performance_suite_time_s
    - performance_tests_total
    score_inputs_baseline_time_s: 1.209133
    score_inputs_actual_time_s: 2.186444
  resource:
    returncode: 1
    stdout: "F                                                                   \
      \     [100%]\n================================== FAILURES ===================================\n\
      __________________________ test_resource_usage_smoke __________________________\n\
      \n    def test_resource_usage_smoke() -> None:\n        \"\"\"\n        Smoke\
      \ test: run a representative batch workload and verify\n        we can observe\
      \ process resource info without crashing.\n    \n        Note: The benchmark\
      \ runner measures subprocess resources.\n        This test is correctness-oriented\
      \ only.\n        \"\"\"\n        proc = psutil.Process()\n        rss_before\
      \ = proc.memory_info().rss\n    \n        loc = _london_location()\n       \
      \ base_date = dt.date(2020, 1, 1)\n    \n        for offset in range(60):\n\
      \            d = base_date + dt.timedelta(days=offset)\n>           _ = sun(loc.observer,\
      \ date=d, tzinfo=loc.timezone)\n\ntests\\Astral\\resource_test.py:65: \n_ _\
      \ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\
      \ _\ngeneration\\Astral\\astral\\sun.py:229: in sun\n    results[k] = f(observer,\
      \ date=date, tzinfo=tzinfo)\ngeneration\\Astral\\astral\\sun.py:193: in dusk\n\
      \    dt = _calc_event(observer, date, CIVIL_ZENITH, is_rise=False)\n_ _ _ _\
      \ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n\
      observer = Observer(latitude=51.5074, longitude=-0.1278, elevation=0.0)\ndate\
      \ = datetime.date(2020, 1, 9), zenith = 96.0, is_rise = False\n\n    def _calc_event(observer:\
      \ Observer, date, zenith: float, is_rise: bool) -> Optional[datetime]:\n   \
      \     \"\"\"\n        Calculate the UTC datetime of a sunrise/sunset/twilight\
      \ event.\n    \n        Returns None if the event does not happen (e.g. polar\
      \ night/day).\n        \"\"\"\n        # Day of year\n        n = day_of_year(date)\n\
      \    \n        lng_hour = observer.longitude / 15.0\n    \n        if is_rise:\n\
      \            t = n + ((6 - lng_hour) / 24)\n        else:\n            t = n\
      \ + ((18 - lng_hour) / 24)\n    \n        # Sun's mean anomaly\n        m =\
      \ (0.9856 * t) - 3.289\n    \n        # Sun's true longitude\n        l = m\
      \ + (1.916 * sin_deg(m)) + (0.020 * sin_deg(2 * m)) + 282.634\n        l = to_range(l,\
      \ 0, 360)\n    \n        # Sun's right ascension\n        ra = atan2_deg(0.91764\
      \ * tan_deg(l), 1)\n        ra = to_range(ra, 0, 360)\n    \n        # convert\
      \ RA to hours\n        ra /= 15.0\n    \n        # Sun's declination\n     \
      \   sin_dec = 0.39782 * sin_deg(l)\n        cos_dec = cos_deg(asin_deg(sin_dec))\n\
      \    \n        # Sun local hour angle\n        cos_h = (cos_deg(zenith) - (sin_dec\
      \ * sin_deg(observer.latitude))) / (\n            cos_dec * cos_deg(observer.latitude)\n\
      \        )\n    \n        # If cos_h out of range the sun never rises/sets on\
      \ this date at this location\n        if cos_h > 1 or cos_h < -1:\n        \
      \    return None\n    \n        if is_rise:\n            h = 360 - acos_deg(cos_h)\n\
      \        else:\n            h = acos_deg(cos_h)\n    \n        h /= 15.0  #\
      \ to hours\n    \n        # local mean time\n        t_local = h + ra - (0.06571\
      \ * t) - 6.622\n    \n        # Convert to UTC\n        ut = t_local - lng_hour\n\
      \        ut = to_range(ut, 0, 24)  # wrap around\n    \n        # Build datetime\
      \ in UTC\n        hour = int(ut)\n        minute = int((ut - hour) * 60)\n \
      \       second = int((((ut - hour) * 60) - minute) * 60 + 0.5)\n    \n>    \
      \   dt = datetime(\n            date.year,\n            date.month,\n      \
      \      date.day,\n            hour=hour,\n            minute=minute,\n     \
      \       second=second,\n            tzinfo=timezone.utc,\n        )\nE     \
      \  ValueError: second must be in 0..59\n\ngeneration\\Astral\\astral\\sun.py:102:\
      \ ValueError\n=========================== short test summary info ===========================\n\
      FAILED tests/Astral/resource_test.py::test_resource_usage_smoke - ValueError:...\n\
      1 failed in 0.57s\n"
    elapsed_time_s: 2.187752
    avg_memory_mb: 34.32
    avg_cpu_percent: 97.7
    passed: 0
    failed: 1
    skipped: 0
    total: 1
    score_inputs_passed: 0
    score_inputs_failed: 1
    score_inputs_total: 1
    score_inputs_returncode: 1
    score_inputs_failed_suite: true
    score_inputs_baseline_keys:
    - avg_cpu_percent
    - avg_memory_mb
    - resource_suite_time_s
    - resource_tests_total
    score_inputs_baseline_mem_mb: 33.35
    score_inputs_baseline_cpu_pct: 104.2
    score_inputs_actual_mem_mb: 34.32
    score_inputs_actual_cpu_pct: 97.7
  robustness:
    returncode: 0
    stdout: '...                                                                      [100%]

      3 passed in 0.17s

      '
    elapsed_time_s: 1.78158
    avg_memory_mb: 31.17
    avg_cpu_percent: 100.9
    passed: 3
    failed: 0
    skipped: 0
    total: 3
    score_inputs_passed: 3
    score_inputs_failed: 0
    score_inputs_total: 3
    score_inputs_returncode: 0
    score_inputs_failed_suite: false
    score_inputs_baseline_keys:
    - robustness_suite_time_s
    - robustness_tests_total
  security:
    returncode: 0
    stdout: 'SECURITY_METRICS high_risk_count=0.0 files_scanned=5.0 total_loc=356.0

      .

      1 passed in 0.15s

      '
    elapsed_time_s: 1.67978
    avg_memory_mb: 31.35
    avg_cpu_percent: 97.0
    passed: 1
    failed: 0
    skipped: 0
    total: 1
    metrics:
      high_risk_count: 0.0
      files_scanned: 5.0
      total_loc: 356.0
    score_inputs_passed: 1
    score_inputs_failed: 0
    score_inputs_total: 1
    score_inputs_returncode: 0
    score_inputs_failed_suite: false
    score_inputs_baseline_keys:
    - metrics
    - security_suite_time_s
    - security_tests_total
    score_inputs_baseline_high_risk_count: 0.0
    score_inputs_generated_high_risk_count: 0.0
  maintainability:
    returncode: 0
    stdout: 'MAINT_METRICS mi_min=22.3500 files_scanned=5.0 total_loc=356.0 max_cc=5.0

      .

      1 passed in 0.19s

      '
    elapsed_time_s: 1.777904
    avg_memory_mb: 31.54
    avg_cpu_percent: 100.0
    passed: 1
    failed: 0
    skipped: 0
    total: 1
    metrics:
      mi_min: 22.35
      files_scanned: 5.0
      total_loc: 356.0
      max_cc: 5.0
    score_inputs_passed: 1
    score_inputs_failed: 0
    score_inputs_total: 1
    score_inputs_returncode: 0
    score_inputs_failed_suite: false
    score_inputs_baseline_keys:
    - maintainability_suite_time_s
    - maintainability_tests_total
    - metrics
    score_inputs_baseline_mi_min: 2.1658
    score_inputs_generated_mi_min: 22.35
    score_inputs_ratio_g_over_b: 10.319512420352757
baseline_metrics:
  functional:
    functional_suite_time_s: 1.258826
    functional_tests_total: 11
  performance:
    performance_suite_time_s: 1.209133
    performance_tests_total: 1
  resource:
    resource_suite_time_s: 1.220496
    resource_tests_total: 1
    avg_memory_mb: 33.35
    avg_cpu_percent: 104.2
  robustness:
    robustness_suite_time_s: 1.213882
    robustness_tests_total: 3
  security:
    security_suite_time_s: 1.42552
    security_tests_total: 1
    metrics:
      high_risk_count: 0.0
      files_scanned: 36.0
      total_loc: 4949.0
  maintainability:
    maintainability_suite_time_s: 1.668661
    maintainability_tests_total: 1
    metrics:
      mi_min: 2.1658
      files_scanned: 36.0
      total_loc: 4949.0
      max_cc: 20.0
pytest_logs_dir: D:\桌面\RealAppCodeBench_generic_eval\results\Astral\pytest_logs
