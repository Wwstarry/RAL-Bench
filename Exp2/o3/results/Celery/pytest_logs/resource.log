FF                                                                       [100%]
================================== FAILURES ===================================
_______ test_resource_001_tracemalloc_growth_is_bounded_for_many_tasks ________

    @pytest.mark.resource
    def test_resource_001_tracemalloc_growth_is_bounded_for_many_tasks() -> None:
        """
        Use tracemalloc (stdlib) so the test stays portable.
        We only check that memory growth is not pathological.
        """
>       app = _make_app()

tests\Celery\resource_test.py:54: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

name = 'celery_resource_app'

    def _make_app(name: str = "celery_resource_app"):
        _ensure_celery_importable()
        from celery import Celery
    
        app = Celery(name, broker="memory://", backend="cache+memory://")
>       app.conf.update(
            task_always_eager=True,
            task_eager_propagates=True,
            task_store_eager_result=False,  # reduce retained objects
            broker_url="memory://",
            result_backend="cache+memory://",
            enable_utc=True,
            timezone="UTC",
            accept_content=["json"],
            task_serializer="json",
            result_serializer="json",
        )
E       TypeError: update() missing 1 required positional argument: 'mapping'

tests\Celery\resource_test.py:33: TypeError
______ test_resource_002_repeated_app_creation_does_not_leak_excessively ______

    @pytest.mark.resource
    def test_resource_002_repeated_app_creation_does_not_leak_excessively() -> None:
        gc.collect()
        tracemalloc.start()
        snap0 = tracemalloc.take_snapshot()
    
        apps = []
        for i in range(30):
>           apps.append(_make_app(f"celery_resource_app_{i}"))

tests\Celery\resource_test.py:93: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

name = 'celery_resource_app_0'

    def _make_app(name: str = "celery_resource_app"):
        _ensure_celery_importable()
        from celery import Celery
    
        app = Celery(name, broker="memory://", backend="cache+memory://")
>       app.conf.update(
            task_always_eager=True,
            task_eager_propagates=True,
            task_store_eager_result=False,  # reduce retained objects
            broker_url="memory://",
            result_backend="cache+memory://",
            enable_utc=True,
            timezone="UTC",
            accept_content=["json"],
            task_serializer="json",
            result_serializer="json",
        )
E       TypeError: update() missing 1 required positional argument: 'mapping'

tests\Celery\resource_test.py:33: TypeError
============================== warnings summary ===============================
tests\Celery\resource_test.py:48
  D:\桌面\RealAppCodeBench_generic_eval\tests\Celery\resource_test.py:48: PytestUnknownMarkWarning: Unknown pytest.mark.resource - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.resource

tests\Celery\resource_test.py:85
  D:\桌面\RealAppCodeBench_generic_eval\tests\Celery\resource_test.py:85: PytestUnknownMarkWarning: Unknown pytest.mark.resource - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.resource

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/Celery/resource_test.py::test_resource_001_tracemalloc_growth_is_bounded_for_many_tasks
FAILED tests/Celery/resource_test.py::test_resource_002_repeated_app_creation_does_not_leak_excessively
2 failed, 2 warnings in 0.38s
