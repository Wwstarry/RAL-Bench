..FFFFF.F                                                                [100%]
================================== FAILURES ===================================
______________ test_003_help_runs_and_mentions_usage_or_options _______________

    def test_003_help_runs_and_mentions_usage_or_options():
        p = _run_cli(["-h"], timeout_s=30)
>       assert p.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = CompletedProcess(args=['C:\\Users\\86152\\AppData\\Local\\Programs\\Python\\Python39\\python.exe', 'D:\\桌面\\RealAppCod...odule>\n    from lib.parse.cmdline import cmdLineParser\nModuleNotFoundError: No module named \'lib.parse.cmdline\'\n').returncode

tests\Sqlmap\functional_test.py:58: AssertionError
_________________________ test_004_advanced_help_runs _________________________

    def test_004_advanced_help_runs():
        p = _run_cli(["-hh"], timeout_s=30)
>       assert p.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = CompletedProcess(args=['C:\\Users\\86152\\AppData\\Local\\Programs\\Python\\Python39\\python.exe', 'D:\\桌面\\RealAppCod...odule>\n    from lib.parse.cmdline import cmdLineParser\nModuleNotFoundError: No module named \'lib.parse.cmdline\'\n').returncode

tests\Sqlmap\functional_test.py:65: AssertionError
_____________ test_005_version_runs_and_prints_version_like_token _____________

    def test_005_version_runs_and_prints_version_like_token():
        """
        sqlmap --version may print a raw version token (e.g. 1.9.12.3#dev) and may also
        print an 'exit' message. Do not require specific words like 'sqlmap'/'version'.
        """
        # --batch helps avoid interactive prompts on some builds, but keep tolerance regardless.
        p = _run_cli(["--batch", "--version"], timeout_s=30)
        out = _out(p)
    
        # Require a version-like token such as "1.9.12.3" optionally with suffix "#dev"
>       assert re.search(r"\b\d+\.\d+(?:\.\d+){0,3}(?:#[a-z0-9]+)?\b", out) is not None
E       assert None is not None
E        +  where None = <function search at 0x000001FBE47699D0>('\\b\\d+\\.\\d+(?:\\.\\d+){0,3}(?:#[a-z0-9]+)?\\b', '\ntraceback (most recent call last):\n  file "d:\\桌面\\realappcodebench_generic_eval\\generation\\sqlmap\\sqlmap.py", ...module>\n    from lib.parse.cmdline import cmdlineparser\nmodulenotfounderror: no module named \'lib.parse.cmdline\'\n')
E        +    where <function search at 0x000001FBE47699D0> = re.search

tests\Sqlmap\functional_test.py:80: AssertionError
________________ test_006_invalid_option_reports_error_cleanly ________________

    def test_006_invalid_option_reports_error_cleanly():
        """
        In sqlmap reference, invalid options can still return code 0 in some paths,
        but stderr includes 'no such option' (argparse style). We assert on the message.
        """
        p = _run_cli(["--this-option-should-not-exist"], timeout_s=30)
        out = _out(p)
    
        # Must clearly indicate option parsing failure; do NOT assert return code.
>       assert ("no such option" in out) or ("unrecognized" in out) or ("unknown" in out)
E       assert ('no such option' in '\ntraceback (most recent call last):\n  file "d:\\桌面\\realappcodebench_generic_eval\\generation\\sqlmap\\sqlmap.py", ...module>\n    from lib.parse.cmdline import cmdlineparser\nmodulenotfounderror: no module named \'lib.parse.cmdline\'\n' or 'unrecognized' in '\ntraceback (most recent call last):\n  file "d:\\桌面\\realappcodebench_generic_eval\\generation\\sqlmap\\sqlmap.py", ...module>\n    from lib.parse.cmdline import cmdlineparser\nmodulenotfounderror: no module named \'lib.parse.cmdline\'\n' or 'unknown' in '\ntraceback (most recent call last):\n  file "d:\\桌面\\realappcodebench_generic_eval\\generation\\sqlmap\\sqlmap.py", ...module>\n    from lib.parse.cmdline import cmdlineparser\nmodulenotfounderror: no module named \'lib.parse.cmdline\'\n')

tests\Sqlmap\functional_test.py:92: AssertionError
______________ test_007_alignment_api_surface_symbols_importable ______________

    def test_007_alignment_api_surface_symbols_importable():
        """
        Alignment anchors (must exist in BOTH reference and generated repos):
    
          - lib.parse.cmdline.cmdLineParser
          - lib.core.option.init, lib.core.option.initOptions
          - lib.core.data: cmdLineOptions, conf, kb
          - lib.core.settings: VERSION, DESCRIPTION
          - lib.controller.controller.start
    
        Only checks importability + symbol presence; does not execute scanning logic.
        """
        repo = _repo_root()
        sys.path.insert(0, str(repo))
        try:
>           from lib.parse.cmdline import cmdLineParser  # noqa: F401
E           ModuleNotFoundError: No module named 'lib.parse.cmdline'

tests\Sqlmap\functional_test.py:110: ModuleNotFoundError
__________ test_009_unicode_output_dir_argument_stable_in_help_mode ___________

    def test_009_unicode_output_dir_argument_stable_in_help_mode():
        root = _project_root()
        out_dir = root / "generation" / "Sqlmap" / "tmp_输出"
        out_dir.mkdir(parents=True, exist_ok=True)
    
        p = _run_cli(["-h", "--output-dir", str(out_dir)], timeout_s=30)
>       assert p.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = CompletedProcess(args=['C:\\Users\\86152\\AppData\\Local\\Programs\\Python\\Python39\\python.exe', 'D:\\桌面\\RealAppCod...odule>\n    from lib.parse.cmdline import cmdLineParser\nModuleNotFoundError: No module named \'lib.parse.cmdline\'\n').returncode

tests\Sqlmap\functional_test.py:142: AssertionError
=========================== short test summary info ===========================
FAILED tests/Sqlmap/functional_test.py::test_003_help_runs_and_mentions_usage_or_options
FAILED tests/Sqlmap/functional_test.py::test_004_advanced_help_runs - Asserti...
FAILED tests/Sqlmap/functional_test.py::test_005_version_runs_and_prints_version_like_token
FAILED tests/Sqlmap/functional_test.py::test_006_invalid_option_reports_error_cleanly
FAILED tests/Sqlmap/functional_test.py::test_007_alignment_api_surface_symbols_importable
FAILED tests/Sqlmap/functional_test.py::test_009_unicode_output_dir_argument_stable_in_help_mode
6 failed, 3 passed in 2.06s
