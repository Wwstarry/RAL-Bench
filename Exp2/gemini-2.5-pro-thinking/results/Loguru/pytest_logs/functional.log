F.FFF.FFFFF                                                              [100%]
================================== FAILURES ===================================
______________________ test_basic_levels_and_formatting _______________________

    def test_basic_levels_and_formatting() -> None:
        log, buf = make_buffer_logger(fmt="{level}:{message}", level="DEBUG")
    
        log.debug("debug-msg")
        log.info("info-msg")
        log.warning("warn-msg")
    
        lines = _lines(buf)
>       assert len(lines) >= 3
E       assert 1 >= 3
E        +  where 1 = len(["Level(name='DEBUG', no=10, color='<blue>', icon=' '):debug-msgLevel(name='INFO', no=20, color='<green>', icon=' '):info-msgLevel(name='WARNING', no=30, color='<yellow>', icon=' '):warn-msg"])

tests\Loguru\functional_test.py:105: AssertionError
_______________________ test_log_method_with_level_name _______________________

    def test_log_method_with_level_name() -> None:
        log, buf = make_buffer_logger(fmt="{level}:{message}", level="DEBUG")
    
>       log.log("INFO", "hello-info")
E       AttributeError: 'Logger' object has no attribute 'log'

tests\Loguru\functional_test.py:125: AttributeError
_______________________ test_bind_extra_renders_fields ________________________

    def test_bind_extra_renders_fields() -> None:
        log, buf = make_buffer_logger(fmt="{level}:{message} user={extra[user]} req={extra[request_id]}")
    
        bound = log.bind(user="alice", request_id="req-123")
        bound.info("hello")
    
        out = buf.getvalue()
>       assert "INFO:" in out
E       assert 'INFO:' in "Level(name='INFO', no=20, color='<green>', icon=' '):hello user= req="

tests\Loguru\functional_test.py:140: AssertionError
____________________ test_contextualize_adds_extra_fields _____________________

    def test_contextualize_adds_extra_fields() -> None:
        log, buf = make_buffer_logger(fmt="{message} user={extra[user]}")
    
>       with log.contextualize(user="bob"):
E       AttributeError: 'Logger' object has no attribute 'contextualize'

tests\Loguru\functional_test.py:149: AttributeError
_______________________ test_add_file_sink_writes_lines _______________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-452/test_add_file_sink_writes_line0')

    def test_add_file_sink_writes_lines(tmp_path: Path) -> None:
        log_path = tmp_path / "loguru_test.log"
    
        logger.remove()
        logger.add(log_path, format="{level}:{message}", level="INFO")
    
        logger.info("file-line-1")
        logger.warning("file-line-2")
    
        assert log_path.exists()
        text = log_path.read_text(encoding="utf-8")
>       assert "INFO:file-line-1" in text
E       AssertionError: assert 'INFO:file-line-1' in ''

tests\Loguru\functional_test.py:186: AssertionError
______________ test_serialize_output_contains_message_and_level _______________

    def test_serialize_output_contains_message_and_level() -> None:
        # serialize=True should emit JSON per record into the sink
        log, buf = make_buffer_logger(level="INFO", serialize=True)
    
        log.info("json-msg")
    
        raw_lines = _lines(buf)
        assert len(raw_lines) >= 1
    
>       record = json.loads(raw_lines[-1])

tests\Loguru\functional_test.py:199: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\86152\AppData\Local\Programs\Python\Python39\lib\json\__init__.py:346: in loads
    return _default_decoder.decode(s)
C:\Users\86152\AppData\Local\Programs\Python\Python39\lib\json\decoder.py:337: in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <json.decoder.JSONDecoder object at 0x00000207CDB2BCD0>
s = "Level(name='INFO', no=20, color='<green>', icon=' '):json-msg", idx = 0

    def raw_decode(self, s, idx=0):
        """Decode a JSON document from ``s`` (a ``str`` beginning with
        a JSON document) and return a 2-tuple of the Python
        representation and the index in ``s`` where the document ended.
    
        This can be used to decode a JSON document from a string that may
        have extraneous data at the end.
    
        """
        try:
            obj, end = self.scan_once(s, idx)
        except StopIteration as err:
>           raise JSONDecodeError("Expecting value", s, err.value) from None
E           json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

C:\Users\86152\AppData\Local\Programs\Python\Python39\lib\json\decoder.py:355: JSONDecodeError
_____________________ test_patch_can_enrich_record_extra ______________________

    def test_patch_can_enrich_record_extra() -> None:
        # patch() lets us enrich record data in a typical usage pattern
        log, buf = make_buffer_logger(fmt="{message} patched={extra[patched]}")
    
        patched = log.patch(lambda r: r["extra"].update({"patched": "yes"}))
>       patched.info("hello")
E       AttributeError: 'NoneType' object has no attribute 'info'

tests\Loguru\functional_test.py:212: AttributeError
________________ test_filter_callable_allows_subset_of_records ________________

    def test_filter_callable_allows_subset_of_records() -> None:
        def only_info(record) -> bool:
            return record["level"].name == "INFO"
    
        log, buf = make_buffer_logger(fmt="{level}:{message}", level="DEBUG", filter_=only_info)
    
        log.debug("nope")
        log.info("yep")
    
        out = buf.getvalue()
        assert "nope" not in out
        assert "yep" in out
>       assert "INFO:" in out
E       assert 'INFO:' in "Level(name='INFO', no=20, color='<green>', icon=' '):yep"

tests\Loguru\functional_test.py:231: AssertionError
____________________ test_time_and_level_in_default_format ____________________

    def test_time_and_level_in_default_format() -> None:
        # Default format should include some timestamp-like content, level, and message.
        buf = io.StringIO()
        logger.remove()
        logger.add(buf)
    
        logger.info("default-format-test")
    
        output = buf.getvalue()
>       assert "INFO" in output
E       AssertionError: assert 'INFO' in 'default-format-test\n'

tests\Loguru\functional_test.py:243: AssertionError
=========================== short test summary info ===========================
FAILED tests/Loguru/functional_test.py::test_basic_levels_and_formatting - as...
FAILED tests/Loguru/functional_test.py::test_log_method_with_level_name - Att...
FAILED tests/Loguru/functional_test.py::test_bind_extra_renders_fields - asse...
FAILED tests/Loguru/functional_test.py::test_contextualize_adds_extra_fields
FAILED tests/Loguru/functional_test.py::test_add_file_sink_writes_lines - Ass...
FAILED tests/Loguru/functional_test.py::test_serialize_output_contains_message_and_level
FAILED tests/Loguru/functional_test.py::test_patch_can_enrich_record_extra - ...
FAILED tests/Loguru/functional_test.py::test_filter_callable_allows_subset_of_records
FAILED tests/Loguru/functional_test.py::test_time_and_level_in_default_format
9 failed, 2 passed in 0.61s
