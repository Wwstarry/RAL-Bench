FFFF....FFF.                                                             [100%]
================================== FAILURES ===================================
________________________ test_lsb_hide_and_reveal_text ________________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_lsb_hide_and_reveal_text0')

    def test_lsb_hide_and_reveal_text(tmp_path: Path) -> None:
        """lsb.hide(..., str) then lsb.reveal(...) returns the same string."""
        _ensure_image_samples_exist()
    
        secret = "hello world"
        output = tmp_path / "lsb_lenna.png"
    
        encoded_img = lsb.hide(str(LENNA_PNG), secret)
        encoded_img.save(str(output))
    
        revealed = lsb.reveal(str(output))
>       assert revealed == secret
E       AssertionError: assert 'o\ufffd\ufffd\ufffd@\ufffd\ufffd\ufffdD^\ufffd\ufffd...\ufffd\ufffd\ufffd\u047fSe\ufffdzH\u0206\ufffd\ufffdH' == 'hello world'
E         
E         - hello world
E         + o\ufffd\ufffd\ufffd@\ufffd\ufffd\ufffdD^\ufffd\ufffd\ufffdm\ufffd\ufffd\ufffdni\ufffds\ufffd\ufffd\ufffd\ufffd\x7f\ufffd\ufffd\ufffdc\u1a40D8\ufffd\ufffd\ufffdl@?NL\ufffd\ufffd@\ufffd\ufffd\x03 \ufffdk\ufffd\ufffd\ufffd\u047fSe\ufffdzH\u0206\ufffd\ufffdH

tests\Stegano\functional_test.py:94: AssertionError
___________________ test_lsb_hide_and_reveal_with_generator ___________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_lsb_hide_and_reveal_with_0')

    def test_lsb_hide_and_reveal_with_generator(tmp_path: Path) -> None:
        """lsb hide/reveal with a deterministic generator."""
        _ensure_image_samples_exist()
    
        secret = "generator secret"
        output = tmp_path / "lsb_generator.png"
    
        gen = generators.eratosthenes()
        encoded_img = lsb.hide(str(LENNA_PNG), secret, generator=gen)
        encoded_img.save(str(output))
    
        gen2 = generators.eratosthenes()
        revealed = lsb.reveal(str(output), generator=gen2)
>       assert revealed == secret
E       AssertionError: assert 'y\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdOzI\ufffd\ufffd...\ufffd\ufffd\\x15\u0311\ufffdk\ufffdV\ufffd\ufffd' == 'generator secret'
E         
E         - generator secret
E         + y\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdOzI\ufffd\ufffd\x1b3\x1a\ufffd\ufffd\ufffd{\ufffd\ufffd\x17\ufffd78\ufffdb\ufffd
E         
E         + S5}&\ufffd\ufffd
E         
E         + \ufffd'\ufffd\x12j>Y\ufffdL\ufffd\ufffd...
E         
E         ...Full output truncated (10 lines hidden), use '-vv' to show

tests\Stegano\functional_test.py:110: AssertionError
__________________ test_lsb_hide_and_reveal_long_ascii_text ___________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_lsb_hide_and_reveal_long_0')

    def test_lsb_hide_and_reveal_long_ascii_text(tmp_path: Path) -> None:
        """LSB should roundtrip a longer ASCII text message (still < typical capacity)."""
        _ensure_image_samples_exist()
    
        secret = "This is a longer secret message with punctuation: 12345, hello-world!"
        output = tmp_path / "lsb_long.png"
    
        encoded_img = lsb.hide(str(LENNA_PNG), secret)
        encoded_img.save(str(output))
    
        revealed = lsb.reveal(str(output))
>       assert revealed == secret
E       AssertionError: assert 'o@\u0315Hr\ufffd\ufffdE^\ufffd\ufffde...\ufffd\ufffd\ufffd\u047fSe\ufffdzH\u0206\ufffd\ufffdH' == 'This is a lo... hello-world!'
E         
E         - This is a longer secret message with punctuation: 12345, hello-world!
E         + o@\u0315Hr\ufffd\ufffdE^\ufffd\ufffde1\ufffd\ufffdoi\ufffd3\ufffd\ufffd`\ufffd\u030dw\ufffd\ufffd\ufffdk\u1bc3U8\ufffd\ufffd\ufffdd\ufffd?MMi\ufffd \ufffd\ufffd\x03&\ufffd{:\ufffd\ufffd\u0467_'\ufffdzH\ufffd\u0195\ufffd\ufffd\x02\u020e}\ufffd\ufffd\x15#\ufffd7\ufffd\ufffd8\ufffd_#4\x1fUs]\ufffd\ufffd\t\ufffd0\x16i\ufffd(\ufffd\x1fYW\u049e\ufffd\ufffdu\ufffd\ufffd_\x17R\ufffd\ufffd\ufffdm\ufffdaS\x03O\x16\ufffd
E         
E         + /\ufffd\ufffd\ufffdA6\ufffd\ufffd,y\ufffd\ufffd\u056e\ufffd6\u01f2w\ufffd1C\ufffdb2<\ufffd0\u04b1C\ufffd=
E         
E         + i\ufffdC\ufffdF\ufffdI\ufffd\x18L|\ufffd\x18\ufffdG\ufffd\ufffd\ufffd`\t\ufffd\ufffd\ufffdl\u033aO#N\ufffdb_\u020c\ufffdx\ufffd...
E         
E         ...Full output truncated (4 lines hidden), use '-vv' to show

tests\Stegano\functional_test.py:124: AssertionError
______________________ test_lsb_reveal_from_image_object ______________________

    def test_lsb_reveal_from_image_object() -> None:
        """lsb.reveal should work when passed a PIL.Image object (common API usage)."""
        _ensure_image_samples_exist()
    
        secret = "object input"
        img_obj = lsb.hide(str(LENNA_PNG), secret)
        revealed = lsb.reveal(img_obj)
>       assert revealed == secret
E       AssertionError: assert 'o\ufffd\ufffd@z\ufffd\ufffdT^\ufffd\ufffd\ufffd...\ufffd\ufffd\ufffd\u047fSe\ufffdzH\u0206\ufffd\ufffdH' == 'object input'
E         
E         - object input
E         + o\ufffd\ufffd@z\ufffd\ufffdT^\ufffd\ufffd\ufffde=\ufffd\ufffdna\ufffd\x11\ufffd\ufffdd\ufffd\u03dc\x7f\ufffd\ufffd\ufffds\u5be1D0\x18\ufffd\ufffdl@?NL\ufffd\ufffd@\ufffd\ufffd\x03 \ufffdk\ufffd\ufffd\ufffd\u047fSe\ufffdzH\u0206\ufffd\ufffdH

tests\Stegano\functional_test.py:134: AssertionError
________________________ test_wav_hide_and_reveal_text ________________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_wav_hide_and_reveal_text0')

    def test_wav_hide_and_reveal_text(tmp_path: Path) -> None:
        """wav.hide writes output WAV; wav.reveal returns the same string."""
        wav_in = _pick_sample_wav()
    
        secret = "wav secret"
        output = tmp_path / "out.wav"
    
        wav.hide(str(wav_in), secret, str(output))
        assert output.exists()
        assert output.stat().st_size > 0
    
        revealed = wav.reveal(str(output))
>       assert revealed == secret
E       AssertionError: assert '' == 'wav secret'
E         
E         - wav secret

tests\Stegano\functional_test.py:224: AssertionError
_____________________ test_wav_hide_and_reveal_short_text _____________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_wav_hide_and_reveal_short0')

    def test_wav_hide_and_reveal_short_text(tmp_path: Path) -> None:
        """A short message should also roundtrip."""
        wav_in = _pick_sample_wav()
    
        secret = "ok"
        output = tmp_path / "out_short.wav"
    
        wav.hide(str(wav_in), secret, str(output))
        assert output.exists()
        assert output.stat().st_size > 0
    
        revealed = wav.reveal(str(output))
>       assert revealed == secret
E       AssertionError: assert '' == 'ok'
E         
E         - ok

tests\Stegano\functional_test.py:239: AssertionError
____________________ test_wav_hide_and_reveal_longer_text _____________________

tmp_path = WindowsPath('C:/Users/86152/AppData/Local/Temp/pytest-of-86152/pytest-443/test_wav_hide_and_reveal_longe0')

    def test_wav_hide_and_reveal_longer_text(tmp_path: Path) -> None:
        """Roundtrip a longer ASCII message via WAV backend."""
        wav_in = _pick_sample_wav()
    
        secret = "WAV backend long message: 1234567890 abcdefghijklmnopqrstuvwxyz"
        output = tmp_path / "out_long.wav"
    
        wav.hide(str(wav_in), secret, str(output))
        assert output.exists()
        assert output.stat().st_size > 0
    
        revealed = wav.reveal(str(output))
>       assert revealed == secret
E       AssertionError: assert '' == 'WAV backend ...nopqrstuvwxyz'
E         
E         - WAV backend long message: 1234567890 abcdefghijklmnopqrstuvwxyz

tests\Stegano\functional_test.py:254: AssertionError
=========================== short test summary info ===========================
FAILED tests/Stegano/functional_test.py::test_lsb_hide_and_reveal_text - Asse...
FAILED tests/Stegano/functional_test.py::test_lsb_hide_and_reveal_with_generator
FAILED tests/Stegano/functional_test.py::test_lsb_hide_and_reveal_long_ascii_text
FAILED tests/Stegano/functional_test.py::test_lsb_reveal_from_image_object - ...
FAILED tests/Stegano/functional_test.py::test_wav_hide_and_reveal_text - Asse...
FAILED tests/Stegano/functional_test.py::test_wav_hide_and_reveal_short_text
FAILED tests/Stegano/functional_test.py::test_wav_hide_and_reveal_longer_text
7 failed, 5 passed in 2.85s
